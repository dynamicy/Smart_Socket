/*!
 * Fancy Gallery v1.4.1
 *
 * Copyright 2011, Rafael Dery
 *
 * Only for sale at the envato marketplaces
 */

(function(d){jQuery.fn.fancygallery=function(t){function p(j){b=d(j);b.addClass("clearfix");u=b.children("div").hide();if(!a.slideTitle&&!a.showTitle)a.titleHeight=0;b.append("<select class='fg-albumSelecter'></select>");d.each(b.children("div"),function(q,e){var v=e.title==a.selectAlbum?"selected='selected'":"";b.find(".fg-albumSelecter").append("<option value='"+e.title+"' "+v+">"+e.title+"</option>")});b.find(".fg-albumSelecter").change(function(){d.isFunction(d.prop)?k(d(this).prop("selectedIndex")):
k(d(this).attr("selectedIndex"))});if(!a.dropdown||u.length<=1)b.find(".fg-albumSelecter").hide();else{b.find(".fg-albumSelecter").uniform();b.find(".selector").css({"float":"right","margin-bottom":5})}a.divider&&b.append("<hr class='fg-line' />");b.append("<ul class='fg-thumbHolder clearfix'></ul>");if(a.imagesPerPage!=0){a.arrowPosition=="top"?b.children("div:hidden").last().after('<a class="fg-prev" href="" title="Previous image stack"></a>'):b.append('<a class="fg-prev" href="" title="Previous image stack"></a>');
b.children(".fg-prev").click(function(){b.find(".fg-next").css({visibility:"visible"});w("prev");return false}).hover(function(){d(this).toggleClass("fg-prev-over")},function(){d(this).toggleClass("fg-prev-over")});a.arrowPosition=="top"?b.children("a:first").after('<a class="fg-next" href="#" title="Next image stack"></a>'):b.append('<a class="fg-next" href="#" title="Next image stack"></a>');b.children(".fg-next").click(function(){b.find(".fg-prev").css({visibility:"visible"});w("next");return false}).hover(function(){d(this).toggleClass("fg-next-over")},
function(){d(this).toggleClass("fg-next-over")})}u.length>0&&b.find(".fg-albumSelecter").change()}function k(j){x=j;i=0;l=d(u[x]).children("a");if(l.length==0){b.find(".fg-thumbHolder").empty().append("<p>This album has no media files!</p>");return false}w("next")}function w(j){if(j=="prev")i-=a.imagesPerPage+y;b.find(".fg-thumbHolder").empty();j=a.imagesPerPage==0?l.length:a.imagesPerPage;for(var q=0;q<j;++q){var e=l.get(i),v=d(e).children("img:first").attr("src"),r=d(e).children("img:first").attr("title")?
d(e).children("img:first").attr("title"):"",B=d(e).has("span").length?d(e).children("span:first").html():"",z="";if(a.hoverImage)z='<img src="'+a.hoverImage+'" class="fg-hover-image" />';b.children(".fg-thumbHolder").append('<li class="fg-listItem" style="width:'+(a.thumbWidth+a.borderThickness*2)+"px; height:"+(a.thumbHeight+a.titleHeight+a.borderThickness*2)+"px; margin: "+a.rowOffset+"px "+a.columnOffset+'px; "><a href="'+e.href+'" title="'+B+'" rel="prettyPhoto['+b.attr("id")+']" class="fg-image"><img class="fg-thumb" src="'+
v+'" alt="'+r+'" />'+z+'</a><span class="fg-title"></span><img src="'+a.shadowImage+'" class="fg-shadow" width='+(a.thumbWidth+a.borderThickness*2)+" /></li>");e=b.find(".fg-listItem:last");q==0&&a.hoverImage&&e.find(".fg-hover-image").load(function(){g=d(this).width();h=d(this).height()});a.shadowImage==""&&e.children(".fg-shadow").css("display","none");if(a.showTitle&&r.length){e.children(".fg-title").text(r).css("height",a.titleHeight);e.children(".fg-shadow").css("top",a.thumbHeight+a.titleHeight+
a.shadowOffset+a.borderThickness*2)}else e.children(".fg-shadow").css("top",a.thumbHeight+a.shadowOffset+a.borderThickness*2);e.hide().fadeIn(500+q*200).hover(function(){var c=d(this),f=c.find(".fg-thumb").stop().fadeTo(400,a.inverseHoverEffect?a.thumbOpacity:1).attr("alt");if(a.hoverImage&&g){var m,n;switch(a.hoverImageEffect){case "fade":n={display:"block",opacity:0,left:a.thumbWidth*0.5-g*0.5,top:a.thumbHeight*0.5-h*0.5};m={opacity:1};break;case "l2r":n={display:"block",left:-g,top:a.thumbHeight*
0.5-h*0.5};m={left:a.thumbWidth*0.5-g*0.5};break;case "r2l":n={display:"block",left:a.thumbWidth+g,top:a.thumbHeight*0.5-h*0.5};m={left:a.thumbWidth*0.5-g*0.5};break;case "t2b":n={display:"block",left:a.thumbWidth*0.5-g*0.5,top:-h};m={top:a.thumbHeight*0.5-h*0.5};break;case "b2t":n={display:"block",left:a.thumbWidth*0.5-g*0.5,top:a.thumbHeight+h};m={top:a.thumbHeight*0.5-h*0.5}}c.find(".fg-hover-image").css(n).stop().animate(m,400)}if(f==""||!a.slideTitle||c.find(".fg-title").height()>0)return false;
a.shadowImage!=""&&c.find(".fg-shadow").stop().animate({top:a.thumbHeight+a.titleHeight+a.shadowOffset+a.borderThickness*2},200);var A=c.find(".fg-title").empty();c.find(".fg-title").stop().animate({height:a.titleHeight},200,function(){if(d.browser.msie&&d.browser.version<=8)c.find(".fg-title").text(f);else{for(var s=[],o=0;o<f.length;++o){A.append("<span>"+f.charAt(o)+"</span>");s.push(A.find("span:last").hide())}if(a.textFadeDirection==="reverse")s.reverse();else a.textFadeDirection==="random"&&
s.shuffle();for(o in s)d(s[o]).stop().fadeIn(50*o)}})},function(){var c=d(this);if(a.hoverImage&&g){var f;switch(a.hoverImageEffect){case "fade":f={opacity:0};break;case "l2r":f={left:a.thumbWidth+g};break;case "r2l":f={left:-g};break;case "t2b":f={top:a.thumbHeight+h};break;case "b2t":f={top:-h}}c.find(".fg-hover-image").stop().animate(f,200)}if(c.find(".fg-thumb").stop().fadeTo(200,a.inverseHoverEffect?1:a.thumbOpacity).attr("alt")==""||!a.slideTitle)return false;c.find(".fg-title").empty().stop().animate({height:0},
200);a.shadowImage!=""&&c.find(".fg-shadow").stop().animate({top:a.thumbHeight+a.shadowOffset+a.borderThickness*2},200)});r=e.find(".fg-thumb");d(r).load(function(){var c=d(this);if(a.scaleMode=="prop"){var f=a.thumbHeight/a.thumbWidth;if(c.height()/c.width()>f){if(c.height()>a.thumbHeight){c.attr("width",Math.round(c.width()*(a.thumbHeight/c.height())));c.attr("height",a.thumbHeight)}}else if(c.width()>a.thumbHeight){c.attr("height",Math.round(c.height()*(a.thumbWidth/c.width())));c.attr("width",
a.thumbWidth)}}else if(a.scaleMode=="stretch"){c.attr("width",a.thumbWidth);c.attr("height",a.thumbHeight)}else{c.attr("width",a.thumbWidth);c.wrap("<div style='height:"+a.thumbHeight+"px; overflow:hidden; display:block;'></div>")}c.fadeTo(0,a.inverseHoverEffect?1:a.thumbOpacity)});i==l.length-1?b.find(".fg-next").css({visibility:"hidden"}):b.find(".fg-next").css({visibility:"visible"});i==0&&b.find(".fg-prev").css({visibility:"hidden"});++i;if(i==l.length)break}d("a[rel^='prettyPhoto']").prettyPhoto(a.boxOptions);
b.find(".fg-image").css({"background-color":a.backgroundColor,padding:a.borderThickness,width:a.thumbWidth,height:a.thumbHeight});b.find(".fg-title").css({width:a.thumbWidth,"background-color":a.backgroundColor,color:a.titleColor,paddingLeft:a.borderThickness,paddingRight:a.borderThickness,top:1+a.thumbHeight+a.borderThickness*2});y=i%a.imagesPerPage==0?a.imagesPerPage:i%a.imagesPerPage}var a=d.extend({},d.fn.fancygallery.defaults,t),u,l,x=-1,i=0,y,b,g,h;return this.each(function(){p(this)})};Array.prototype.shuffle=
function(){for(var t,p,k=0;k<this.length;k++){p=Math.floor(Math.random()*this.length);t=this[k];this[k]=this[p];this[p]=t}};d.fn.fancygallery.defaults={thumbWidth:140,thumbHeight:79,backgroundColor:"#F5F5F5",titleColor:"#383634",borderThickness:3,shadowOffset:0,thumbOpacity:0.6,titleHeight:20,rowOffset:15,columnOffset:15,imagesPerPage:6,textFadeDirection:"normal",scaleMode:"stretch",shadowImage:"shadow.png",hoverImage:"",hoverImageEffect:"fade",arrowPosition:"top",selectAlbum:"",
dropdown:true,divider:true,showTitle:false,slideTitle:true,inverseHoverEffect:false,boxOptions:{}}})(jQuery);
